"use strict";(self.webpackChunk_uniswap_interface=self.webpackChunk_uniswap_interface||[]).push([[5910],{5910:(e,t,n)=>{n.r(t),n.d(t,{BAG_WIDTH:()=>ht,XXXL_BAG_WIDTH:()=>It,default:()=>Ct});var s,r=n(98985),i=n(73955),o=n(3884),a=n(95744),l=n(48444),c=n(27790),d=n(83138),u=n(28183),p=n(17248),g=n(93285),x=n(2367),m=n(98921),h=n(40388),I=n(9205),A=n(25855),f=n(83143),v=n(42320),T=n(73304),C=n(30168),N=n(49200),E=n(13746);(0,N.ZP)(s||(s=(0,C.Z)(['\n  query NftUniversalRouterAddress($chain: Chain = ETHEREUM) {\n    nftRoute(chain: $chain, senderAddress: "", nftTrades: []) {\n      toAddress\n    }\n  }\n'])));var b=n(55011),_=n(57766),w=n(96528),j=n(73830),y=n(53107),P=n(24177),k=n(56926),O=n(18402),R=n(68977),S=n(30708),L=n(71233);var z=n(2534),B=n(23388);function U(e){return{...(n={inputAmount:e.inputAmount,outputAmount:e.outputAmount},{inputAmount:{amount:n.inputAmount.quotient.toString(),token:{address:n.inputAmount.currency.isToken?n.inputAmount.currency.address:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",chainId:n.inputAmount.currency.chainId,decimals:n.inputAmount.currency.decimals,isNative:n.inputAmount.currency.isNative}},outputAmount:{amount:n.outputAmount.quotient.toString(),token:{address:n.outputAmount.currency.isToken?n.outputAmount.currency.address:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",chainId:n.outputAmount.currency.chainId,decimals:n.outputAmount.currency.decimals,isNative:n.outputAmount.currency.isNative}}}),pools:(t=e.route.pools,t.map((e=>function(e){const t="fee"in e;return{pair:t?void 0:{tokenAmountA:{amount:e.reserve0.quotient.toString(),token:{address:e.token0.address,chainId:e.token0.chainId,decimals:e.token0.decimals,isNative:e.token0.isNative}},tokenAmountB:{amount:e.reserve1.quotient.toString(),token:{address:e.token1.address,chainId:e.token1.chainId,decimals:e.token1.decimals,isNative:e.token1.isNative}}},pool:t?{fee:e.fee,liquidity:e.liquidity.toString(),sqrtRatioX96:e.sqrtRatioX96.toString(),tickCurrent:e.tickCurrent.toString(),tokenA:{address:e.token0.address,chainId:e.token0.chainId,decimals:e.token0.decimals,isNative:e.token0.isNative},tokenB:{address:e.token1.address,chainId:e.token1.chainId,decimals:e.token1.decimals,isNative:e.token1.isNative}}:void 0}}(e))))};var t,n}var D=n(4252);function M(e,t,n){const s=(0,D.i)((e=>e.setTokenTradeInput)),r=!!e&&e.routes,i=!!e&&!!e.inputAmount&&e.inputAmount.currency.isToken,o=!!n&&!!t;(0,L.useEffect)((()=>{if(!r||!i||!o)return void s(void 0);const a=parseInt(n.multiply(100).toSignificant(2)),{mixedTokenTradeRouteInputs:l,v2TokenTradeRouteInputs:c,v3TokenTradeRouteInputs:d}=function(e){const t=[],n=[],s=[],r=e.swaps;for(const i of r)i.route.protocol===B.Protocol.MIXED?t.push(U(i)):i.route.protocol===B.Protocol.V2?n.push(U(i)):s.push(U(i));return{mixedTokenTradeRouteInputs:t.length>0?t:void 0,v2TokenTradeRouteInputs:n.length>0?n:void 0,v3TokenTradeRouteInputs:s.length>0?s:void 0}}(e),u={mixedRoutes:l,tradeType:E.NS.ExactOutput,v2Routes:c,v3Routes:d},p="permitSignature"in t&&t.permitSignature?{details:{amount:t.permitSignature.details.amount.toString(),expiration:t.permitSignature.details.expiration.toString(),nonce:t.permitSignature.details.nonce.toString(),token:t.permitSignature.details.token},sigDeadline:t.permitSignature.sigDeadline.toString(),signature:t.permitSignature.signature,spender:t.permitSignature.spender}:void 0;s({permit:p,routes:u,slippageToleranceBasisPoints:a,tokenAmount:{amount:e.inputAmount.quotient.toString(),token:{address:e.inputAmount.currency.address,chainId:e.inputAmount.currency.chainId,decimals:e.inputAmount.currency.decimals,isNative:e.inputAmount.currency.isNative}}})}),[t,n,o,i,r,s,e])}var G=n(29789),F=n(7914);function W(e,t,n){const{chainId:s}=(0,p.useWeb3React)(),r=function(e,t){if(e)return e===u.ChainId.MAINNET?null!==t&&void 0!==t?t:(0,G.UNIVERSAL_ROUTER_ADDRESS)(e):(0,T.EC)(e)?(0,G.UNIVERSAL_ROUTER_ADDRESS)(e):void 0}(s,n),i=null!==t&&void 0!==t?t:null!==e&&void 0!==e&&e.currency.isToken?e:void 0,l=(0,_.Z)(i,r),c=l.state===_.K.REQUIRED&&l.isApprovalLoading,[d,g]=(0,L.useState)(!1),x=(0,L.useCallback)((async()=>{(0,F.Z)(l.state===_.K.REQUIRED),g(!0);try{await l.approveAndPermit(),(0,o._P)(a.Je.APPROVE_TOKEN_TXN_SUBMITTED,{chain_id:s,token_symbol:null===t||void 0===t?void 0:t.currency.symbol,token_address:null===t||void 0===t?void 0:t.currency.address})}catch(e){console.error(e)}finally{g(!1)}}),[l,s,null===t||void 0===t?void 0:t.currency.address,null===t||void 0===t?void 0:t.currency.symbol]);return(0,L.useMemo)((()=>({allowance:l,isApprovalLoading:c,isAllowancePending:d,updateAllowance:x})),[l,d,c,x])}var H=n(62291);function V(e){const t=(0,r.useTheme)();return(0,L.useMemo)((()=>{const n=e?(0,H.QW)(e):void 0,s=n?(0,H.BK)(n):void 0,r="error"===s?t.accentCritical:"warning"===s?t.accentWarning:void 0;return n&&s&&r?{priceImpactSeverity:{type:s,color:r},displayPercentage:()=>function(e){var t;const n=e.lessThan(0)?"+":"";if(Number(e.numerator)/Number(e.denominator)*100<.005)return"0.00%";const s=parseFloat(null===(t=e.multiply(-1))||void 0===t?void 0:t.toFixed(2));return"".concat(n).concat(s,"%")}(n)}:void 0}),[t.accentCritical,t.accentWarning,e])}var Z=n(72249),q=n(81737),X=n(68577);var K=n(79146),$=n(92311),Y=n(78264),J=n(27623),Q=n(16337),ee=n(25618),te=n(37881);let ne=function(e){return e[e.WALLET_NOT_CONNECTED=0]="WALLET_NOT_CONNECTED",e[e.NOT_SUPPORTED_CHAIN=1]="NOT_SUPPORTED_CHAIN",e[e.INSUFFICIENT_BALANCE=2]="INSUFFICIENT_BALANCE",e[e.ERROR=3]="ERROR",e[e.IN_WALLET_CONFIRMATION=4]="IN_WALLET_CONFIRMATION",e[e.PROCESSING_TRANSACTION=5]="PROCESSING_TRANSACTION",e[e.FETCHING_TOKEN_ROUTE=6]="FETCHING_TOKEN_ROUTE",e[e.INVALID_TOKEN_ROUTE=7]="INVALID_TOKEN_ROUTE",e[e.NO_TOKEN_ROUTE_FOUND=8]="NO_TOKEN_ROUTE_FOUND",e[e.LOADING_ALLOWANCE=9]="LOADING_ALLOWANCE",e[e.IN_WALLET_ALLOWANCE_APPROVAL=10]="IN_WALLET_ALLOWANCE_APPROVAL",e[e.PROCESSING_APPROVAL=11]="PROCESSING_APPROVAL",e[e.REQUIRE_APPROVAL=12]="REQUIRE_APPROVAL",e[e.CONFIRM_UPDATED_PRICE=13]="CONFIRM_UPDATED_PRICE",e[e.PRICE_IMPACT_HIGH=14]="PRICE_IMPACT_HIGH",e[e.PAY=15]="PAY",e}({});function se(e,t,n,s,r){const o={handleClick:()=>{},buttonText:(0,te.jsx)(i.cC,{id:"Something went wrong"}),disabled:!0,warningText:void 0,warningTextColor:t.accentWarning,helperText:void 0,helperTextColor:t.textSecondary,buttonColor:t.accentAction,buttonTextColor:t.accentTextLightPrimary};return{[ne.WALLET_NOT_CONNECTED]:{...o,handleClick:null!==n&&void 0!==n?n:()=>{},disabled:!1,buttonText:(0,te.jsx)(i.cC,{id:"Connect wallet"})},[ne.NOT_SUPPORTED_CHAIN]:{...o,handleClick:null!==n&&void 0!==n?n:()=>{},buttonText:(0,te.jsx)(i.cC,{id:"Switch networks"}),disabled:!1,warningText:(0,te.jsx)(i.cC,{id:"Wrong network"})},[ne.INSUFFICIENT_BALANCE]:{...o,buttonText:(0,te.jsx)(i.cC,{id:"Pay"}),warningText:(0,te.jsx)(i.cC,{id:"Insufficient funds"})},[ne.ERROR]:{...o,warningText:(0,te.jsx)(i.cC,{id:"Something went wrong. Please try again."})},[ne.IN_WALLET_CONFIRMATION]:{...o,buttonText:(0,te.jsx)(i.cC,{id:"Proceed in wallet"})},[ne.PROCESSING_TRANSACTION]:{...o,buttonText:(0,te.jsx)(i.cC,{id:"Transaction pending"})},[ne.FETCHING_TOKEN_ROUTE]:{...o,buttonText:(0,te.jsx)(i.cC,{id:"Fetching Route"})},[ne.INVALID_TOKEN_ROUTE]:{...o,buttonText:(0,te.jsx)(i.cC,{id:"Pay"})},[ne.NO_TOKEN_ROUTE_FOUND]:{...o,buttonText:(0,te.jsx)(i.cC,{id:"Insufficient liquidity"}),buttonColor:t.backgroundInteractive,buttonTextColor:t.textPrimary,helperText:(0,te.jsx)(i.cC,{id:"Insufficient pool liquidity to complete transaction"})},[ne.LOADING_ALLOWANCE]:{...o,buttonText:(0,te.jsx)(i.cC,{id:"Loading Allowance"})},[ne.IN_WALLET_ALLOWANCE_APPROVAL]:{...o,buttonText:(0,te.jsx)(i.cC,{id:"Approve in your wallet"})},[ne.PROCESSING_APPROVAL]:{...o,buttonText:(0,te.jsx)(i.cC,{id:"Approval pending"})},[ne.REQUIRE_APPROVAL]:{...o,disabled:!1,handleClick:null!==n&&void 0!==n?n:()=>{},helperText:(0,te.jsx)(i.cC,{id:"An approval is needed to use this token."}),buttonText:(0,te.jsx)(i.cC,{id:"Approve"})},[ne.CONFIRM_UPDATED_PRICE]:{...o,handleClick:null!==n&&void 0!==n?n:()=>{},disabled:!1,warningTextColor:t.accentAction,warningText:(0,te.jsx)(i.cC,{id:"Price updated"}),buttonText:(0,te.jsx)(i.cC,{id:"Pay"})},[ne.PRICE_IMPACT_HIGH]:{...o,handleClick:null!==n&&void 0!==n?n:()=>{},disabled:!1,buttonColor:r?r.priceImpactSeverity.color:o.buttonColor,helperText:(0,te.jsx)(i.cC,{id:"Price impact warning"}),helperTextColor:r?r.priceImpactSeverity.color:o.helperTextColor,buttonText:(0,te.jsx)(i.cC,{id:"Pay Anyway"})},[ne.PAY]:{...o,handleClick:null!==n&&void 0!==n?n:()=>{},disabled:!1,buttonText:(0,te.jsx)(i.cC,{id:"Pay"}),helperText:s?(0,te.jsx)(i.cC,{id:"Refunds for unavailable items will be given in ETH"}):void 0}}[e]}const re=r.default.div.withConfig({componentId:"sc-rcepl8-0"})(["padding:0px 12px;"]),ie=r.default.div.withConfig({componentId:"sc-rcepl8-1"})(["border-top:1px solid ",";color:",";display:flex;flex-direction:column;margin:0px 16px 8px;padding:12px 0px;border-bottom-left-radius:12px;border-bottom-right-radius:12px;"],(e=>{let{theme:t}=e;return t.backgroundOutline}),(e=>{let{theme:t}=e;return t.textPrimary})),oe=(0,r.default)(x.ZP).withConfig({componentId:"sc-rcepl8-2"})(["padding-top:8px;padding-bottom:16px;"]),ae=(0,r.default)(I.ZP).withConfig({componentId:"sc-rcepl8-3"})(["justify-content:space-between;align-items:start;gap:8px;"]),le=(0,r.default)(x.ZP).withConfig({componentId:"sc-rcepl8-4"})(["text-align:end;overflow-x:hidden;"]),ce=(0,r.default)(Y.Z).withConfig({componentId:"sc-rcepl8-5"})(["width:14px;margin-right:4px;color:inherit;"]),de=(0,r.default)(ee.Tv.BodyPrimary).withConfig({componentId:"sc-rcepl8-6"})(["align-items:center;color:",";display:flex;justify-content:center;margin-bottom:10px !important;text-align:center;"],(e=>{let{$color:t}=e;return t})),ue=(0,r.default)(ee.Tv.Caption).withConfig({componentId:"sc-rcepl8-7"})(["color:",";display:flex;justify-content:center;text-align:center;margin-bottom:10px !important;"],(e=>{let{$color:t}=e;return t})),pe=(0,r.default)(I.ZP).withConfig({componentId:"sc-rcepl8-8"})(["gap:8px;cursor:pointer;"]),ge=r.default.button.withConfig({componentId:"sc-rcepl8-9"})(["display:flex;background:",";color:",";font-weight:600;line-height:24px;font-size:16px;gap:16px;justify-content:center;border:none;border-radius:12px;padding:12px 0px;cursor:pointer;align-items:center;&:disabled{opacity:0.6;cursor:auto;}"],(e=>{let{$backgroundColor:t}=e;return t}),(e=>{let{$color:t}=e;return t})),xe=(0,r.default)(f.X).withConfig({componentId:"sc-rcepl8-10"})(["border-radius:4px;width:4rem;height:20px;align-self:end;"]),me=(0,r.default)(I.ZP).withConfig({componentId:"sc-rcepl8-11"})(["align-items:center;gap:8px;width:100%;justify-content:flex-end;"]),he=(0,r.default)(I.ZP).withConfig({componentId:"sc-rcepl8-12"})(["align-items:center;gap:8px;"]),Ie=(0,r.default)(ee.Tv.BodyPrimary).withConfig({componentId:"sc-rcepl8-13"})(["line-height:20px;font-weight:500;overflow-x:hidden;text-overflow:ellipsis;white-space:nowrap;scrollbar-width:none;::-webkit-scrollbar{display:none;}"]),Ae=e=>{let{color:t,children:n}=e;return n?(0,te.jsxs)(de,{"data-testid":"nft-buy-button-warning",fontSize:"14px",lineHeight:"20px",$color:t,children:[(0,te.jsx)(ce,{}),n]}):null},fe=e=>{let{children:t,color:n}=e;return t?(0,te.jsx)(ue,{lineHeight:"16px",$color:n,children:t}):null},ve=e=>{let{usingPayWithAnyToken:t,totalEthPrice:n,activeCurrency:s,tradeState:r,trade:o}=e;var a;return t?r!==Q.qx.LOADING||o?(0,te.jsx)(Ie,{color:r===Q.qx.LOADING?"textTertiary":"textPrimary",children:(0,$.Nd)(null===o||void 0===o?void 0:o.inputAmount.toExact())}):(0,te.jsx)(ee.Tv.BodyPrimary,{color:"textTertiary",lineHeight:"20px",fontWeight:"500",children:(0,te.jsx)(i.cC,{id:"Fetching price..."})}):(0,te.jsxs)(ee.Tv.BodyPrimary,{lineHeight:"20px",fontWeight:"500",children:[(0,$.zb)(n.toString()),"\xa0",null!==(a=null===s||void 0===s?void 0:s.symbol)&&void 0!==a?a:"ETH"]})},Te=e=>{let{usdcValue:t,priceImpact:n,tradeState:s,usingPayWithAnyToken:r}=e;return t?(0,te.jsxs)(me,{children:[n&&(0,te.jsx)(te.Fragment,{children:(0,te.jsx)(v.ud,{text:c.ag._("The estimated difference between the USD values of input and output amounts."),children:(0,te.jsxs)(he,{children:[(0,te.jsx)(Y.Z,{color:n.priceImpactSeverity.color,size:"16px"}),(0,te.jsxs)(ee.Tv.BodySmall,{style:{color:n.priceImpactSeverity.color},lineHeight:"20px",children:["(",(0,te.jsx)(i.cC,{id:"{0}",values:{0:n.displayPercentage()}}),")"]})]})})}),(0,te.jsx)(ee.Tv.BodySmall,{color:"textTertiary",lineHeight:"20px",children:"".concat((0,$.Nd)(null===t||void 0===t?void 0:t.toExact(),!0))})]}):!r||s!==Q.qx.INVALID&&s!==Q.qx.NO_ROUTE_FOUND?(0,te.jsx)(xe,{}):null},Ce=[Z.s.FETCHING_ROUTE,Z.s.CONFIRMING_IN_WALLET,Z.s.FETCHING_FINAL_ROUTE,Z.s.PROCESSING_TRANSACTION],Ne=e=>{let{setModalIsOpen:t,eventProperties:n}=e;const s=(0,g.LK)(),l=(0,r.useTheme)(),{account:c,chainId:I,connector:f}=(0,p.useWeb3React)(),v=Boolean(c&&I),C=(0,O.P)(),{inputCurrency:N}=(0,D.i)((e=>{let{inputCurrency:t}=e;return{inputCurrency:t}}),q.X),B=(0,D.i)((e=>e.setInputCurrency)),U=(0,b.U8)("ETH"),G=(0,y.mM)(null!==c&&void 0!==c?c:void 0,N&&N.isToken?N:void 0),{isLocked:F,bagStatus:H,setBagExpanded:$,setBagStatus:Y}=(0,k.c)((e=>{let{isLocked:t,bagStatus:n,setBagExpanded:s,setBagStatus:r}=e;return{isLocked:t,bagStatus:n,setBagExpanded:s,setBagStatus:r}}),q.X),[ce,de]=(0,L.useState)(!1),ue=Ce.includes(H),xe=null!==N&&void 0!==N?N:U,me=!!N&&I===u.ChainId.MAINNET,{universalRouterAddress:he,universalRouterAddressIsLoading:Ie}=function(){var e;const{data:t,loading:n}=(0,E.Z6)({fetchPolicy:"no-cache"});return{universalRouterAddress:null===t||void 0===t||null===(e=t.nftRoute)||void 0===e?void 0:e.toAddress,universalRouterAddressIsLoading:n}}();!function(e){const t=(0,X.p)((e=>e.state)),n=(0,X.p)((e=>e.setState)),s=(0,L.useRef)(t),{setBagStatus:r,setLocked:i}=(0,k.c)((e=>{let{setBagExpanded:t,setBagStatus:n,setLocked:s}=e;return{setBagExpanded:t,setBagStatus:n,setLocked:s}}),q.X);(0,L.useEffect)((()=>{X.p.subscribe((e=>s.current=e.state))}),[]),(0,L.useEffect)((()=>{s.current===Z.c$.Confirming&&r(Z.s.PROCESSING_TRANSACTION),s.current!==Z.c$.Denied&&s.current!==Z.c$.Invalid||(s.current===Z.c$.Invalid?r(Z.s.WARNING):r(Z.s.CONFIRM_REVIEW),n(Z.c$.New),i(!1),e(!1))}),[i,r,e,n,s.current])}(t);const Ne=(0,z.$)(),Ee=(0,L.useMemo)((()=>(0,P.Z)((0,d.formatEther)(C.toString()),null!==U&&void 0!==U?U:void 0)),[U,C]),{state:be,trade:_e,maximumAmountIn:we,allowedSlippage:je}=function(e,t){const{state:n,trade:s}=(0,S.P)(u.TradeType.EXACT_OUTPUT,t,null!==e&&void 0!==e?e:void 0),r=(0,R.Z)(s),i=(0,L.useMemo)((()=>{const e=null===s||void 0===s?void 0:s.maximumAmountIn(r);return null!==e&&void 0!==e&&e.currency.isToken?e:void 0}),[r,s]);return(0,L.useMemo)((()=>({state:n,trade:s,maximumAmountIn:i,allowedSlippage:r})),[r,i,n,s])}(me?N:void 0,Ee),{allowance:ye,isAllowancePending:Pe,isApprovalLoading:ke,updateAllowance:Oe}=W(null!==_e&&void 0!==_e&&_e.inputAmount.currency.isToken?null===_e||void 0===_e?void 0:_e.inputAmount:void 0,we,he),Re=ye.state===_.K.LOADING||Ie;M(_e,ye,je);const Se=V(_e),Le=(0,w.sq)(null===_e||void 0===_e?void 0:_e.inputAmount),ze=(0,w.sq)(Ee),Be=me?Le:ze,{balance:Ue}=(0,K.t)(),De=(0,L.useMemo)((()=>{if(v&&I===u.ChainId.MAINNET){if(N){const e=null===_e||void 0===_e?void 0:_e.inputAmount;if(!G||!e)return;return!G.lessThan(e)}return(0,d.parseEther)(Ue).gte(C)}}),[v,I,N,Ue,C,null===_e||void 0===_e?void 0:_e.inputAmount,G]);(0,L.useEffect)((()=>{Y(Z.s.ADDING_TO_BAG)}),[N,Y]);const Me=(0,j.o)(),{buttonText:Ge,buttonTextColor:Fe,disabled:We,warningText:He,warningTextColor:Ve,helperText:Ze,helperTextColor:qe,handleClick:Xe,buttonColor:Ke}=(0,L.useMemo)((()=>{if(v&&I!==u.ChainId.MAINNET){const e=()=>Me(f,u.ChainId.MAINNET);return se(ne.NOT_SUPPORTED_CHAIN,l,e)}if(!1===De)return se(ne.INSUFFICIENT_BALANCE,l);if(H===Z.s.WARNING)return se(ne.ERROR,l);if(!v){const e=()=>{s(),$({bagExpanded:!1})};return se(ne.WALLET_NOT_CONNECTED,l,e)}if(H===Z.s.FETCHING_FINAL_ROUTE||H===Z.s.CONFIRMING_IN_WALLET)return se(ne.IN_WALLET_CONFIRMATION,l);if(H===Z.s.PROCESSING_TRANSACTION)return se(ne.PROCESSING_TRANSACTION,l);if(me&&be!==Q.qx.VALID)return be===Q.qx.INVALID?se(ne.INVALID_TOKEN_ROUTE,l):be===Q.qx.NO_ROUTE_FOUND?se(ne.NO_TOKEN_ROUTE_FOUND,l):se(ne.FETCHING_TOKEN_ROUTE,l);if(ye.state===_.K.REQUIRED||Re){const e=()=>Oe();return se(Re?ne.LOADING_ALLOWANCE:Pe?ne.IN_WALLET_ALLOWANCE_APPROVAL:ke?ne.PROCESSING_APPROVAL:ne.REQUIRE_APPROVAL,l,e)}return H===Z.s.CONFIRM_QUOTE?se(ne.CONFIRM_UPDATED_PRICE,l,Ne):Se&&"error"===Se.priceImpactSeverity.type?se(ne.PRICE_IMPACT_HIGH,l,Ne,me,Se):se(ne.PAY,l,Ne,me)}),[v,I,De,H,me,be,ye.state,Re,Se,l,Ne,Me,f,s,$,Pe,ke,Oe]),$e={usd_value:null===Be||void 0===Be?void 0:Be.toExact(),using_erc20:!!N,...n};return(0,te.jsxs)(re,{children:[(0,te.jsxs)(ie,{children:[(0,te.jsxs)(oe,{gap:"xs",children:[(0,te.jsxs)(ae,{children:[(0,te.jsx)(x.ZP,{gap:"xs",children:(0,T.EC)(I)&&(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(ee.Tv.SubHeaderSmall,{children:(0,te.jsx)(i.cC,{id:"Pay with"})}),(0,te.jsxs)(pe,{onClick:()=>{F||(de(!0),(0,o._P)(a.Yz.NFT_BUY_TOKEN_SELECTOR_CLICKED))},children:[(0,te.jsx)(h.Z,{currency:xe,size:"24px"}),(0,te.jsx)(ee.Tv.HeadlineSmall,{fontWeight:500,lineHeight:"24px",children:null===xe||void 0===xe?void 0:xe.symbol}),(0,te.jsx)(J.Z,{size:20,color:l.textSecondary})]})]})}),(0,te.jsxs)(le,{gap:"xs",children:[(0,te.jsx)(ee.Tv.SubHeaderSmall,{marginBottom:"4px",children:(0,te.jsx)(i.cC,{id:"Total"})}),(0,te.jsx)(ve,{usingPayWithAnyToken:me,totalEthPrice:C,activeCurrency:xe,tradeState:be,trade:_e})]})]}),(0,te.jsx)(Te,{usdcValue:Be,priceImpact:Se,tradeState:be,usingPayWithAnyToken:me})]}),(0,te.jsxs)(o.M8,{events:[a.TM.onClick],name:a.Yz.NFT_BUY_BAG_PAY,element:a.xo.NFT_BUY_BAG_PAY_BUTTON,properties:{...$e},shouldLogImpression:v&&!We,children:[(0,te.jsx)(Ae,{color:Ve,children:He}),(0,te.jsx)(fe,{color:qe,children:Ze}),(0,te.jsxs)(ge,{"data-testid":"nft-buy-button",onClick:Xe,disabled:We||ue,$backgroundColor:Ke,$color:Fe,children:[ue&&(0,te.jsx)(m.ZP,{size:"20px",stroke:"white"}),Ge]})]})]}),(0,te.jsx)(A.Z,{isOpen:ce,onDismiss:()=>de(!1),onCurrencySelect:e=>{B(e.isNative?void 0:e),e.isToken&&(0,o._P)(a.Yz.NFT_BUY_TOKEN_SELECTED,{token_address:e.address,token_symbol:e.symbol})},selectedCurrency:null!==xe&&void 0!==xe?xe:void 0,onlyShowCurrenciesWithBalance:!0})]})};var Ee,be=n(27811),_e=n(73276),we=n(38757),je=n(4896),ye=n(67917),Pe=n(24691),ke=(n(21844),n(96812)),Oe=n(6833),Re=n(16074);const Se=(0,r.keyframes)(Ee||(Ee=(0,C.Z)(["\n  0% {\n    stroke-dashoffset: 1000;\n  }\n  100% {\n    stroke-dashoffset: 0;\n  }\n"]))),Le=r.default.circle.withConfig({componentId:"sc-5ix82i-0"})(["stroke-dasharray:1000;stroke-dashoffset:0;-webkit-animation:"," linear;animation:"," linear;animation-duration:160s;stroke:",";"],Se,Se,(e=>{let{theme:t}=e;return t.accentAction})),ze=()=>(0,te.jsx)(be.n,{display:"flex",position:"absolute",children:(0,te.jsx)("svg",{height:"18px",width:"18px",children:(0,te.jsx)(Le,{strokeWidth:"".concat(1.5),strokeLinecap:"round",style:{transform:"rotate(90deg)",transformOrigin:"50% 50%"},fill:"transparent",r:"8px",cx:"9px",cy:"9px"})})});var Be=n(75405),Ue=n(58600),De=n(89191),Me=n(38175),Ge=n(6261),Fe=(n(30473),"_1kuawcb rgw6ezb1 rgw6ezcv rgw6ez7m3 rgw6ez45v rgw6ez45p"),We="_1kuawc1 rgw6ez2dv rgw6ez2jd rgw6ez2oj rgw6ez281 rgw6ez4ej rgw6ez3tj rgw6ez79z rgw6ez1dv rgw6ez7bj",He="rgw6ez14d rgw6ez1bd rgw6ez49p rgw6ez7bb",Ve="rgw6ezcp rgw6ezav rgw6eze7 rgw6ez7m3 rgw6ez45p rgw6ez45v rgw6ez4ep",Ze="_1kuawc7",qe="rgw6ez3xv";const Xe=(0,r.default)(Re.UH).withConfig({componentId:"sc-iebvtt-0"})(["border-radius:12px;font-size:14px;line-height:16px;margin-left:16px;padding:12px 14px;"]),Ke=(0,r.default)(Re.UH).withConfig({componentId:"sc-iebvtt-1"})(["border-radius:12px;flex:1 1 auto;font-size:14px;padding:8px;width:50%;"]),$e=r.default.div.withConfig({componentId:"sc-iebvtt-2"})(["position:absolute;display:block;right:-11px;top:-11px;z-index:1;transition:250ms;width:45px;height:45px;display:flex;align-items:center;justify-content:center;"]),Ye=e=>{let{onClick:t}=e;return(0,te.jsx)($e,{onClick:t,children:(0,te.jsx)(Ue.Xv,{})})},Je=()=>(0,te.jsx)(be.n,{position:"relative",background:"loadingBackground",className:He,children:(0,te.jsxs)(be.n,{position:"absolute",textAlign:"center",left:"1/2",top:"1/2",style:{transform:"translate3d(-50%, -50%, 0)"},color:"gray500",fontSize:"12",fontWeight:"normal",children:["Image",(0,te.jsx)("br",{}),"not",(0,te.jsx)("br",{}),"available"]})}),Qe=e=>{var t;let{asset:n,usdPrice:s,removeAsset:r,showRemove:i,grayscale:o,isMobile:a}=e;const[l,c]=(0,L.useState)(!1),[u,p]=(0,L.useState)(!n.smallImageUrl),[g,x]=(0,L.useState)(!1),m=(0,L.useCallback)((()=>x(!0)),[]),h=(0,L.useCallback)((()=>x(!1)),[]),I=Boolean(i&&g&&!a),A=n.updatedPriceInfo?n.updatedPriceInfo.ETHPrice:n.priceInfo.ETHPrice,f=(0,$.zb)(A),v=(0,$.Nd)(s?parseFloat((0,d.formatEther)(A))*s:s,!0),T=(0,L.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),r([n])}),[n,r]);return(0,te.jsx)(Ge.rU,{to:(0,$.PZ)(n),style:{textDecoration:"none"},children:(0,te.jsxs)(we.X2,{className:We,onMouseEnter:m,onMouseLeave:h,children:[(0,te.jsxs)(be.n,{position:"relative",display:"flex",children:[i&&a&&(0,te.jsx)(Ye,{onClick:T}),!u&&(0,te.jsx)(be.n,{as:"img",src:n.smallImageUrl,alt:n.name,className:(0,Oe.default)(He,o&&!g&&Ze),onLoad:()=>{c(!0)},onError:()=>{p(!0)},visibility:l?"visible":"hidden"}),!l&&(0,te.jsx)(be.n,{position:"absolute",className:"".concat(He," ").concat(Me.L)}),u&&(0,te.jsx)(Je,{})]}),(0,te.jsxs)(we.sg,{overflow:"hidden",width:"full",color:o?"textSecondary":"textPrimary",children:[(0,te.jsxs)(we.X2,{overflow:"hidden",width:"full",whiteSpace:"nowrap",children:[(0,te.jsx)(be.n,{className:Fe,children:null!==(t=n.name)&&void 0!==t?t:"#".concat(n.tokenId)}),n.susFlag&&(0,te.jsx)(Be.yT,{})]}),(0,te.jsxs)(we.X2,{overflow:"hidden",whiteSpace:"nowrap",gap:"2",children:[(0,te.jsx)(be.n,{className:Ve,children:n.collectionName}),n.collectionIsVerified&&(0,te.jsx)(Ue.SA,{className:qe})]})]}),I&&(0,te.jsx)(Xe,{onClick:T,emphasis:Re.eI.medium,size:Re.qE.medium,children:"Remove"}),(!I||a)&&(0,te.jsxs)(we.sg,{flexShrink:"0",alignItems:"flex-end",children:[(0,te.jsxs)(be.n,{className:"_1kuawc9 rgw6ez3sv rgw6ezb1 rgw6ezd1 rgw6ez3xv",children:[f,"\xa0ETH"]}),(0,te.jsx)(be.n,{className:Ve,children:v})]})]})})},et=e=>{var t;let{asset:n,usdPrice:s,markAssetAsReviewed:r,top:i,isMobile:o}=e;const a=ke.O$.from(null===(t=n.updatedPriceInfo)||void 0===t?void 0:t.ETHPrice).gt(ke.O$.from(n.priceInfo.ETHPrice)),l=(0,L.useCallback)((e=>{e.preventDefault(),e.stopPropagation();r(n,!1)}),[n,r]),c=(0,L.useCallback)((e=>{e.preventDefault(),e.stopPropagation();r(n,!0)}),[n,r]);return(0,te.jsxs)(we.sg,{className:"rgw6ez2p7 rgw6ez28p rgw6ezlj rgw6ezr1 rgw6ez4sj rgw6ez3t7 rgw6ez4ej rgw6ez7ab rgw6ez7jr rgw6ez547 rgw6ez5op rgw6ez1dv rgw6ez79z",borderTopColor:i?"backgroundOutline":"transparent",children:[(0,te.jsxs)(we.X2,{className:"rgw6ezcp rgw6ezav rgw6eze7 rgw6ez4cd rgw6ez3sv",children:[a?(0,te.jsx)(Ue.PH,{}):(0,te.jsx)(Ue.HE,{}),(0,te.jsx)(be.n,{children:"Price ".concat(a?"increased":"decreased"," from ").concat((0,$.zb)(n.priceInfo.ETHPrice)," ETH")})]}),(0,te.jsx)(be.n,{style:{marginLeft:"-8px",marginRight:"-8px"},children:(0,te.jsx)(Qe,{asset:n,usdPrice:s,removeAsset:()=>{},isMobile:o})}),(0,te.jsxs)(we.X2,{gap:"8",justifyContent:"space-between",children:[(0,te.jsx)(Ke,{onClick:l,emphasis:Re.eI.medium,size:Re.qE.small,children:"Remove"}),(0,te.jsx)(Ke,{onClick:c,emphasis:Re.eI.high,size:Re.qE.small,children:"Keep"})]})]})},tt=e=>{let{assets:t}=e;return(0,te.jsx)(we.sg,{display:"grid",style:{gridTemplateColumns:"repeat(".concat(t.length,", 20px)"),width:"".concat(32+20*(t.length-1),"px")},children:t.map(((e,t)=>(0,te.jsx)(be.n,{as:"img",src:e.smallImageUrl,width:"32",height:"32",borderStyle:"solid",borderWidth:"1px",borderColor:"backgroundSurface",borderRadius:"4",style:{zIndex:t},className:Ze},"".concat(e.address,"-").concat(e.tokenId))))})},nt=e=>{let{assets:t,usdPrice:n,clearUnavailableAssets:s,didOpenUnavailableAssets:r,setDidOpenUnavailableAssets:i,isMobile:o}=e;const[a,l]=(0,L.useReducer)((e=>!e),!1),[c,d]=(0,L.useState)(8);if((0,L.useEffect)((()=>{if(!c)return void(r||(s(),i(!1)));const e=setInterval((()=>{d(c-1)}),1e3);return()=>clearInterval(e)}),[c,s,r,i]),!t||0===t.length)return null;const u=t.length>1,p=a||!u;return(0,te.jsx)(we.sg,{className:"rgw6ez2p7 rgw6ez28p rgw6ezlj rgw6ezr1 rgw6ez4sj rgw6ez3tj rgw6ez4ej rgw6ez7ab rgw6ez7jr rgw6ez547 rgw6ez60j rgw6ez5op rgw6ez1dv",children:(0,te.jsxs)(we.sg,{children:[(0,te.jsxs)(we.X2,{justifyContent:"space-between",marginBottom:p?"12":"0",cursor:u?"pointer":"default",onClick:()=>{u&&(!r&&i(!0),l())},children:[(0,te.jsxs)(we.X2,{gap:"12",color:"textSecondary",className:De.Km,children:[!p&&(0,te.jsx)(tt,{assets:t.slice(0,5)}),"No longer available"]}),u&&(0,te.jsx)(we.X2,{color:"textSecondary",children:a?(0,te.jsx)(Ue.X_,{}):(0,te.jsx)(Ue.Xs,{})}),!r&&(0,te.jsxs)(we.X2,{position:"relative",width:"20",height:"20",color:"textPrimary",justifyContent:"center",cursor:"pointer",onClick:s,children:[(0,te.jsx)(ze,{}),(0,te.jsx)(Ue.Nb,{})]})]}),(0,te.jsx)(we.sg,{gap:"8",style:{marginLeft:"-8px",marginRight:"-8px"},children:p&&t.map((e=>(0,te.jsx)(Qe,{asset:e,usdPrice:n,removeAsset:()=>{},grayscale:!0,isMobile:o},e.id)))})]})})};var st=n(80989);const rt=()=>{const e=(0,ye.cP)((e=>e.bagStatus)),t=(0,ye.cP)((e=>e.setBagStatus)),n=(0,ye.cP)((e=>e.markAssetAsReviewed)),s=(0,ye.cP)((e=>e.didOpenUnavailableAssets)),r=(0,ye.cP)((e=>e.setDidOpenUnavailableAssets)),i=(0,ye.cP)((e=>e.itemsInBag)),l=(0,ye.cP)((e=>e.setItemsInBag)),c=(0,ye.cP)((e=>e.removeAssetsFromBag)),d=(0,ye.dD)(),u=(0,L.useMemo)((()=>(0,$.G7)(i)),[i]),{data:p}=(0,st.useQuery)(["fetchPrice",{}],(()=>(0,$.tw)()),{}),{unchangedAssets:g,priceChangedAssets:x,unavailableAssets:m,availableItems:h}=(0,L.useMemo)((()=>({unchangedAssets:u.filter((e=>e.status===Z.ZJ.ADDED_TO_BAG||e.status===Z.ZJ.REVIEWED)).map((e=>e.asset)),priceChangedAssets:u.filter((e=>e.status===Z.ZJ.REVIEWING_PRICE_CHANGE)).map((e=>e.asset)),unavailableAssets:u.filter((e=>e.status===Z.ZJ.UNAVAILABLE)).map((e=>e.asset)),availableItems:u.filter((e=>e.status!==Z.ZJ.UNAVAILABLE))})),[u]);return(0,L.useEffect)((()=>{const n=x.length>0,s=u.length>0;n&&(0,o._P)(a.Yz.NFT_BUY_BAG_CHANGED,{usd_value:p,bag_quantity:u,...(0,$.Hj)(x)}),e!==Z.s.IN_REVIEW||n||t(s?Z.s.CONFIRM_REVIEW:Z.s.ADDING_TO_BAG),e!==Z.s.CONFIRM_REVIEW||s||t(Z.s.ADDING_TO_BAG)}),[e,u,x,t,p]),(0,te.jsxs)(te.Fragment,{children:[(0,te.jsxs)(we.sg,{display:x.length>0||m.length>0?"flex":"none",children:[m.length>0&&(0,te.jsx)(o.fM,{name:a.Yz.NFT_BUY_BAG_CHANGED,properties:{usd_value:p,bag_quantity:u.length,...(0,$.Hj)(m)},shouldLogImpression:!0,children:(0,te.jsx)(nt,{assets:m,usdPrice:p,clearUnavailableAssets:()=>l(h),didOpenUnavailableAssets:s,setDidOpenUnavailableAssets:r,isMobile:d})}),x.map(((e,t)=>(0,te.jsx)(et,{asset:e,usdPrice:p,markAssetAsReviewed:n,top:0===t&&0===m.length,isMobile:d},e.id)))]}),(0,te.jsx)(we.sg,{children:g.slice(0).reverse().map((e=>(0,te.jsx)(Qe,{asset:e,usdPrice:p,removeAsset:c,showRemove:!0,isMobile:d},e.id)))})]})};var it=n(49815);const ot=(0,r.default)(ee.oD).withConfig({componentId:"sc-bq6y8h-0"})(["color:",";cursor:pointer;font-weight:600;font-size:14px;line-height:16px;:active{text-decoration:none;}"],(e=>{let{theme:t}=e;return t.textSecondary})),at=r.default.button.withConfig({componentId:"sc-bq6y8h-1"})(["align-items:center;background-color:transparent;border-radius:8px;border:none;color:",";cursor:pointer;display:flex;flex-direction:row;justify-content:flex-end;margin-left:auto;padding:2px;opacity:1;",""],(e=>{let{theme:t}=e;return t.textPrimary}),it.c),lt=r.default.div.withConfig({componentId:"sc-bq6y8h-2"})(["align-items:center;background-color:",";border-radius:100px;font-weight:bold;color:",";display:flex;font-size:10px;justify-content:center;min-width:",";min-height:",";padding:4px 6px;"],(e=>{let{theme:t}=e;return t.accentAction}),(e=>{let{theme:t}=e;return t.accentTextLightPrimary}),(e=>{let{sizing:t}=e;return t}),(e=>{let{sizing:t}=e;return t})),ct=r.default.div.withConfig({componentId:"sc-bq6y8h-3"})(["align-items:center;display:flex;flex-direction:row;gap:8px;justify-content:flex-start;margin:16px 28px;text-align:center;"]),dt=e=>{let{numberOfAssets:t,closeBag:n,resetFlow:s,isProfilePage:r}=e;const o=(0,L.useMemo)((()=>(e=>{const t=e.toString().length;return"".concat(14+6*t,"px")})(t)),[t]);return(0,te.jsxs)(ct,{children:[(0,te.jsx)(ee.Tv.HeadlineSmall,{children:r?(0,te.jsx)(i.cC,{id:"Sell"}):(0,te.jsx)(i.cC,{id:"Bag"})}),t>0&&(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(lt,{sizing:o,children:t}),(0,te.jsx)(ot,{onClick:s,children:(0,te.jsx)(i.cC,{id:"Clear all"})})]}),(0,te.jsx)(at,{onClick:n,children:(0,te.jsx)(Ue.BW,{"data-testid":"nft-bag-close-icon"})})]})};var ut=n(82530);const pt=(0,r.default)(we.sg).withConfig({componentId:"sc-xhr1rt-0"})(["gap:12px;margin-top:68px;"]),gt=()=>{const e=(0,l.e5)();return(0,te.jsxs)(pt,{children:[(0,te.jsx)(we.M5,{children:e?(0,te.jsx)(Ue.JP,{color:ut.Z4.colors.textTertiary}):(0,te.jsx)(Ue.Ln,{color:ut.Z4.colors.textTertiary,height:"96px",width:"96px",strokeWidth:"1px"})}),e?(0,te.jsx)(we.M5,{"data-testid":"nft-no-nfts-selected",className:De.v4,children:"No NFTs selected"}):(0,te.jsxs)(we.sg,{gap:"16",children:[(0,te.jsx)(we.M5,{"data-testid":"nft-empty-bag",className:De.v4,style:{lineHeight:"24px"},children:"Your bag is empty"}),(0,te.jsx)(we.M5,{fontSize:"12",fontWeight:"normal",color:"textSecondary",style:{lineHeight:"16px"},children:"Selected NFTs will appear here"})]})]})},xt=e=>{let{asset:t}=e;const n=(0,ye.Pc)((e=>e.removeSellAsset)),s=(0,ye.dD)(),[r,i]=(0,L.useState)(!1),o=()=>i(!r),a=e=>{e.preventDefault(),e.stopPropagation(),n(t)};return(0,te.jsxs)(we.X2,{className:We,onMouseEnter:o,onMouseLeave:o,children:[(0,te.jsxs)(be.n,{position:"relative",display:"flex",children:[s&&(0,te.jsx)(Ye,{onClick:a}),(0,te.jsx)("img",{src:t.smallImageUrl,alt:t.name,className:He})]}),(0,te.jsxs)(we.sg,{overflow:"hidden",width:"full",color:"textPrimary",children:[(0,te.jsx)(we.X2,{overflow:"hidden",width:"full",justifyContent:"space-between",whiteSpace:"nowrap",gap:"16",children:(0,te.jsx)(be.n,{className:Fe,children:t.name||"#".concat(t.tokenId)})}),(0,te.jsxs)(we.X2,{overflow:"hidden",whiteSpace:"nowrap",gap:"2",children:[(0,te.jsx)(be.n,{className:Ve,children:t.asset_contract.name}),t.collectionIsVerified&&(0,te.jsx)(Ue.SA,{className:qe})]})]}),r&&!s&&(0,te.jsx)(Xe,{onClick:a,emphasis:Re.eI.medium,size:Re.qE.medium,children:"Remove"})]})},mt=()=>{const e=(0,ye.Pc)((e=>e.sellAssets));return(0,te.jsx)(we.sg,{children:e.length?e.map(((e,t)=>(0,te.jsx)(xt,{asset:e},t))):null})},ht=320,It=360,At=r.default.div.withConfig({componentId:"sc-1cpp7nx-0"})(["position:fixed;display:flex;flex-direction:column;top:88px;right:20px;width:","px;height:calc(100vh - 108px);background:",";border:1px solid ",";border-radius:16px;box-shadow:",";z-index:",";@media only screen and (max-width:","){right:0px;top:0px;width:100%;height:100%;border-radius:0px;border:none;}@media only screen and (min-width:","){width:","px;}"],ht,(e=>{let{theme:t}=e;return t.backgroundSurface}),(e=>{let{theme:t}=e;return t.backgroundOutline}),(e=>{let{theme:t}=e;return t.shallowShadow}),(e=>{let{raiseZIndex:t,isProfilePage:n}=e;return t?n?Pe.k.modalOverTooltip:Pe.k.modalBackdrop-1:3}),(e=>{let{theme:t}=e;return"".concat(t.breakpoint.sm,"px")}),(e=>{let{theme:t}=e;return"".concat(t.breakpoint.xxxl,"px")}),It),ft=r.default.div.withConfig({componentId:"sc-1cpp7nx-1"})(["position:fixed;background:rgba(0,0,0,0.7);top:0px;width:100%;height:100%;"]),vt=r.default.div.withConfig({componentId:"sc-1cpp7nx-2"})(["background:",";color:",";margin:32px 28px 16px;padding:10px 0px;border-radius:12px;text-align:center;font-size:16px;font-weight:600;line-height:20px;cursor:pointer;transition:",";:hover{opacity:",";}"],(e=>{let{theme:t}=e;return t.accentAction}),(e=>{let{theme:t}=e;return t.accentTextLightPrimary}),(e=>{let{theme:t}=e;return t.transition.duration.medium}),(e=>{let{theme:t}=e;return t.opacity.hover})),Tt=e=>{let{top:t,show:n}=e;return(0,te.jsx)(be.n,{marginX:"24",borderWidth:"1px",borderStyle:"solid",borderColor:"transparent",borderTopColor:t?"transparent":"backgroundOutline",borderBottomColor:t?"backgroundOutline":"transparent",opacity:n?"1":"0",transition:"250"})},Ct=()=>{const{resetSellAssets:e,sellAssets:t}=(0,ye.Pc)((e=>{let{reset:t,sellAssets:n}=e;return{resetSellAssets:t,sellAssets:n}}),q.X),{setProfilePageState:n}=(0,ye.aO)((e=>{let{setProfilePageState:t}=e;return{setProfilePageState:t}})),{bagStatus:s,bagIsLocked:r,reset:c,bagExpanded:d,toggleBag:u,setBagExpanded:p}=(0,ye.cP)((e=>({...e,bagIsLocked:e.isLocked,uncheckedItemsInBag:e.itemsInBag})),q.X),{uncheckedItemsInBag:g}=(0,ye.cP)((e=>{let{itemsInBag:t}=e;return{uncheckedItemsInBag:t}})),x=(0,l.e5)(),m=(0,l._3)(),h=(0,l.GZ)(),I=(0,ye.dD)(),A=(0,L.useMemo)((()=>(0,$.G7)(g)),[g]),[f,v]=(0,L.useState)(!1),{userCanScroll:T,scrollRef:C,scrollProgress:N,scrollHandler:E}=(0,ye.uh)(),b=(0,L.useCallback)((()=>{p({bagExpanded:!1,manualClose:!0})}),[p]);(0,L.useEffect)((()=>{r&&!f&&v(!0)}),[r,f]);const _=A.length>0,w=A.length>0,j=t.length>0,y=Boolean(!x&&!w&&s===Z.s.ADDING_TO_BAG||x&&!j),P=(0,L.useMemo)((()=>({...(0,$.Hj)(A.map((e=>e.asset)))})),[A]);return d&&h?(0,te.jsxs)(_e.h,{children:[(0,te.jsxs)(At,{"data-testid":"nft-bag",raiseZIndex:I||f,isProfilePage:x,children:[(0,te.jsx)(dt,{numberOfAssets:x?t.length:A.length,closeBag:b,resetFlow:x?e:c,isProfilePage:x}),y&&(0,te.jsx)(gt,{}),(0,te.jsx)(Tt,{top:!0,show:T&&N>0}),(0,te.jsx)(we.sg,{ref:C,className:"_1jcz50r1 rgw6ez2ej rgw6ez2k1 rgw6ez1yv rgw6ez7nf",onScroll:E,gap:"12",children:x?(0,te.jsx)(mt,{}):(0,te.jsx)(rt,{})}),_&&!x&&(0,te.jsx)(Ne,{setModalIsOpen:v,eventProperties:P}),j&&x&&(0,te.jsx)(vt,{onClick:()=>{u(),n(Z.HA.LISTING),(0,o._P)(a.Yz.NFT_PROFILE_PAGE_START_SELL,{list_quantity:t.length,collection_addresses:t.map((e=>e.asset_contract.address)),token_ids:t.map((e=>e.tokenId))})},children:(0,te.jsx)(i.cC,{id:"Continue"})})]}),m?(0,te.jsx)(ft,{onClick:u}):f&&(0,te.jsx)(je.a,{onClick:()=>r?void 0:v(!1)})]}):null}},18402:(e,t,n)=>{n.d(t,{B:()=>p,P:()=>u});var s=n(96812),r=n(83138),i=n(55011),o=n(96528),a=n(24177),l=n(72249),c=n(71233),d=n(56926);function u(){const e=(0,d.c)((e=>e.itemsInBag));return(0,c.useMemo)((()=>e.reduce(((e,t)=>t.status!==l.ZJ.UNAVAILABLE?e.add(s.O$.from(t.asset.updatedPriceInfo?t.asset.updatedPriceInfo.ETHPrice:t.asset.priceInfo.ETHPrice)):e),s.O$.from(0))),[e])}function p(){const e=u(),t=(0,i.U8)("ETH"),n=(0,c.useMemo)((()=>(0,a.Z)((0,r.formatEther)(e.toString()),null!==t&&void 0!==t?t:void 0)),[t,e]),s=(0,o.sq)(n);return(0,c.useMemo)((()=>null===s||void 0===s?void 0:s.toExact()),[s])}},2534:(e,t,n)=>{n.d(t,{d:()=>v,$:()=>f});var s=n(17248),r=n(13746),i=n(72249),o=n(92311),a=n(40519),l=n(77949);function c(e,t,n){const{hasPriceAdjustment:s,updatedAssets:r}=(0,a.$)(e,t),o=s&&n,{unchanged:c,priceChanged:d,unavailable:u}=(0,l.Kr)(r),p=r.length>0,g=d.length>0,x=u.length>0,m=g||x,h=function(e,t,n){return[...e.map((e=>({asset:e,status:i.ZJ.UNAVAILABLE}))),...t.map((e=>({asset:e,status:i.ZJ.REVIEWING_PRICE_CHANGE}))),...n.map((e=>({asset:e,status:i.ZJ.REVIEWED})))]}(u,d,c),I=function(e,t,n,s){return e?t?n?i.s.IN_REVIEW:i.s.CONFIRM_REVIEW:s?i.s.CONFIRM_QUOTE:i.s.CONFIRMING_IN_WALLET:i.s.ADDING_TO_BAG}(p,m,g,o);return{newBagItems:h,nextBagStatus:I}}function d(e){return{action:i.lQ.Buy,marketplace:e.marketplace.toLowerCase(),amountIn:e.price.value,assetIn:{ETHPrice:e.price.value,baseAsset:e.price.currency,basePrice:e.price.value,baseDecimals:"18"},amountOut:e.amount.toString(),assetOut:{id:e.id,decimals:18,address:e.contractAddress,priceInfo:{ETHPrice:e.price.value,baseAsset:e.price.currency,basePrice:e.price.value,baseDecimals:"18"},tokenType:e.tokenType,tokenId:e.tokenId,amount:e.amount.toString(),marketplace:e.marketplace.toLowerCase(),orderSource:"api"}}}function u(e,t){const n=e.route?e.route.map(d):[];return{route:n,routeResponse:{route:n,valueToSend:t?void 0:e.sendAmount.value,data:e.calldata,to:e.toAddress}}}var p=n(71233),g=n(81737),x=n(56926),m=n(68577),h=n(57811);function I(){const{provider:e}=(0,s.useWeb3React)(),t=(0,m.p)((e=>e.sendTransaction)),n=(0,h.J)((e=>e.setTransactionResponse)),{setLocked:r,setBagExpanded:i,reset:o}=(0,x.c)((e=>{let{setLocked:t,setBagExpanded:n,reset:s}=e;return{setLocked:t,setBagExpanded:n,reset:s}}),g.X);return(0,p.useCallback)((async function(s,a){let l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return;const c=await t(e.getSigner(),a,s,l);c&&(r(!1),n(c),i({bagExpanded:!1}),o())}),[e,o,t,i,r,n])}var A=n(4252);function f(){const{account:e}=(0,s.useWeb3React)(),{itemsInBag:t,setBagStatus:n,didOpenUnavailableAssets:a,setDidOpenUnavailableAssets:l,isLocked:d,setLocked:m,setItemsInBag:h}=(0,x.c)((e=>{let{itemsInBag:t,setBagStatus:n,didOpenUnavailableAssets:s,setDidOpenUnavailableAssets:r,isLocked:i,setLocked:o,setItemsInBag:a}=e;return{itemsInBag:t,setBagStatus:n,didOpenUnavailableAssets:s,setDidOpenUnavailableAssets:r,isLocked:i,setLocked:o,setItemsInBag:a}}),g.X),f=(0,A.i)((e=>e.tokenTradeInput)),v=(0,p.useMemo)((()=>(0,o.G7)(t)),[t]),[T]=(0,r.yo)(),C=I(),N=(0,p.useCallback)((()=>{a&&l(!1),!d&&m(!0),n(i.s.FETCHING_ROUTE)}),[d,a,m,n,l]);return(0,p.useCallback)((async()=>{N(),T({variables:{senderAddress:e||"",nftTrades:(0,o.hI)(v),tokenTrades:f||void 0},onCompleted:e=>{if(!e.nftRoute||!e.nftRoute.route)return n(i.s.ADDING_TO_BAG),void m(!1);const t=function(e){return e.filter((e=>e.status!==i.ZJ.UNAVAILABLE)).map((e=>e.asset))}(v),s=!!f,{route:r,routeResponse:o}=u(e.nftRoute,s),{newBagItems:a,nextBagStatus:l}=c(t,r,s);if(h(a),n(l),l===i.s.CONFIRMING_IN_WALLET)return C(o,t,s),void m(!0);m(!1)}})}),[e,T,v,C,N,m,n,h,f])}const v=()=>{const{account:e}=(0,s.useWeb3React)(),[t]=(0,r.yo)(),n=I(),[i,l]=(0,p.useState)(!1),c=(0,p.useCallback)((async s=>{l(!0),t({variables:{senderAddress:e||"",nftTrades:(0,o.GW)([s]),tokenTrades:void 0},pollInterval:0,fetchPolicy:"no-cache",onCompleted:e=>{if(l(!1),!e.nftRoute||!e.nftRoute.route)return;const{route:t,routeResponse:r}=u(e.nftRoute,!1),{updatedAssets:i}=(0,a.$)([s],t),{priceChanged:c,unavailable:d}=(0,o.Kr)(i);c.length>0||d.length>0||n(r,i,!1)}})}),[e,t,n]);return(0,p.useMemo)((()=>({fetchAndPurchaseSingleAsset:c,isLoading:i})),[c,i])}},4252:(e,t,n)=>{n.d(t,{i:()=>i});var s=n(75078),r=n(18765);const i=(0,s.Ue)()((0,r.mW)((e=>({inputCurrency:void 0,tokenTradeInput:void 0,setInputCurrency:t=>e((()=>({inputCurrency:t}))),clearInputCurrency:()=>e((()=>({inputCurrency:void 0}))),setTokenTradeInput:t=>e((()=>({tokenTradeInput:t})))})),{name:"useTokenInput"}))}}]);
//# sourceMappingURL=5910.23797cc2.chunk.js.map